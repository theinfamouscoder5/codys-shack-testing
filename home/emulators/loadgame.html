<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading game... | Cody's Shack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9980078383965223"
     crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../css/loadingbar.css">
    <link rel="stylesheet" href="../css/loadgame.css">
</head>
<body>
    <div class="sidebar-container">
        <h1 class="game-load-title">
            Loading your game...
        </h1>
        <br>
        <p class="gamers-ahead-text" id="gamers-ahead-text-box">Gamers ahead of you: <b><span class="gamers-ahead-count-text" id="gamers-ahead-count-box">0</span></b></p>
        <br>
        <div id="loadingProgressG">
            <div id="loadingProgressG_1" class="loadingProgressG"></div>
        </div>
        <br>
        <br>
        <a href="https://buy.stripe.com/test_00g3fL2rH5jd9e87st" class="buy-button">Upgrade to Day Pass</a>
        <br>
        <br>
        <div class="upgrade-container">
            <p class="upgrade-title">Upgrade for shorter queues and get:</p>
            <ul class="upgrade-list">
                <li>Up to <b>8 hour</b> game session times</li>
                <li><b>Little</b> to <b>no</b> ads</li>
                <li><b>Priority</b> in game queues</li>
                <li><b>Better quality</b> gaming, up to <b>4K</b></li>
            </ul>
        </div>
        <br>
        <br>
        
    </div>
    

    <!--<script async
        src="https://js.stripe.com/v3/buy-button.js">
    </script>
    <stripe-buy-button
    buy-button-id="buy_btn_1Px8nLLUcMxw3jtOomEQ2AlP"
    publishable-key="pk_test_51Lv0S8LUcMxw3jtOLXoIDmutuTKkIA58jncRUhH30hz0XmgBxQ9pGfffGEBIv4C2jCHG8QQhdSNq7ScpvnOjGu8q00KxJGH4WS"
    class="ml-10">
    </stripe-buy-button>-->

    <div id="ad-wrapper">
        <div class="ad-container" id="ad-cont">
            <div id="video-placement">
                <video id="adVideo" disableremoteplayback="" disablepictureinpicture="" id="preStreamVideo" autoplay="" fxflex="" width="1020" name="opportunityVideo" poster="shared/assets/img/DefaultGameArt-TVBanner-nonGame.svg" class="ad-video" style="flex: 1 1 0px; box-sizing: border-box;">
                    
                </video>
            </div>
            <p style="text-align: center; margin-top: 5px;">Watch all the ads to stay in the game queue</p>
        </div>
        <!--<button _ngcontent-ng-c3955037579="" cdkfocusinitial="" mat-button="" aria-label="volume" class="mat-focus-indicator mat-icon-button ng-tns-c3955037579-130 mat-button mat-button-base"><span class="mat-button-wrapper"><mat-icon _ngcontent-ng-c3955037579="" role="img" svgicon="volume" class="mat-icon notranslate ng-tns-c3955037579-130 mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="volume" style=""><svg viewBox="0 0 24 24" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" focusable="false"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg></mat-icon></span><span matripple="" class="mat-ripple mat-button-ripple"></span><span class="mat-button-focus-overlay"></span></button>-->
    </div>

    <!--<script>
        const emu = new URLSearchParams(window.location.search).get('emucode');

        function getCookieByName(name) {
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                cookie = cookie.trim();
                if (cookie.startsWith(name + '=')) {
                    return cookie.substring(name.length + 1);
                }
            }
            return null;
        }

        function delete_cookie(name) {
            document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }

        function completeLoad(){
            document.cookie = "loadEmuState=true; path=/;";
            window.location.href = "index.html?emucode="+emu;
        }

        function showAds(){
            let videourl = '../ads/theatlasad.mp4'
            document.getElementById('ad-cont').innerHTML = '<video id="advertisementVideo" width="756" height="504" loop style="border-radius: 5px;" autoplay muted><source id="ad1" src="'+videourl+'" type="video/mp4" controls>Your browser does not support the video tag.</video>'
        }

        function isNumber(n) { return !isNaN(parseFloat(n)) && !isNaN(n - 0) }
        const isEmuNumber = isNumber(emu);

        if(emu !== null){
            if(isEmuNumber == true){
                const gameLoadValid = getCookieByName('loadEmuAdState');
                if(gameLoadValid == 'true'){
                    delete_cookie('loadEmuAdState');
                    showAds();
                    completeLoad();
                    //document.getElementById('advertisementVideo').addEventListener('ended',completeLoad,false);
                } else {
                    window.location.href = "../emulators.html";
                }
            } else {
                window.location.href = "../emulators.html";
            }
        } else {
            window.location.href = "../emulators.html";
        }

    </script>-->
    
    <script>
    function animateSidebar() {
      const sidebarContainer = document.querySelector('.sidebar-container');
      const gameLoadTitle = document.querySelector('.game-load-title');

      sidebarContainer.classList.add('sidebar-container-hover');
      gameLoadTitle.classList.add('game-load-title-hover');
    }

    function unAnimateSidebar() {
      const sidebarContainer = document.querySelector('.sidebar-container');
      const gameLoadTitle = document.querySelector('.game-load-title');

      sidebarContainer.classList.remove('sidebar-container-hover');
      gameLoadTitle.classList.remove('game-load-title-hover');
    }

    function showAds() {
      const adContainer = document.querySelector('#ad-wrapper');

      adContainer.setAttribute("id", "ad-wrapper-on")
    }

    function hideAds() {
      const adContainer = document.querySelector('#ad-wrapper');

      adContainer.setAttribute("id", "#ad-wrapper")
    }

    function getRandomAd() {
        return fetch('../ads/ads.json')
            .then(response => response.json())
            .then(data => {
            const arr = data.map((item) => item.trim().replace("<", "").replace(">", ""));
            const randomAd = arr[Math.floor(Math.random() * arr.length)];
            return randomAd;
            })
            .catch(error => console.error(error));
    }

    function playAds(){
        const adVideo = document.querySelector("#adVideo");

        getRandomAd().then(ad => adVideo.innerHTML = ad + 'Your browser does not support HTML5 video.');

        animateSidebar();
        showAds ();
        const myTimeout = setTimeout(unAnimateSidebar, 5000);
        const myTimeout2 = setTimeout(hideAds, 5000);
    }

    const myTimeout = setTimeout(playAds, 1000);

    console.log(`
     /////    |||||||||||    /////    |||||    !
    |             | |       |     |   |   |    !
    |             | |       |     |   |   |    !
    |  ///        | |       |     |   |||||    !
          |       | |       |     |   |        !
    | /////       |||        /////   |        !

    Keep your account safe! Do not send any information from
    here to anyone or paste any text here.

    If someone is asking you to copy or paste text here, then
    you're giving someone access to your account, memberships,
    games, and more.`);
    </script>
</body>
</html>